[ERROR] [2022-11-22 18:18:44,784] [log.241] [10967] [139811747788352] Internal Server Error: /
Traceback (most recent call last):
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/movies/middleware.py", line 12, in __call__
    start_time = time.time()
AttributeError: type object 'datetime.time' has no attribute 'time'
[ERROR] [2022-11-22 18:18:45,896] [log.241] [10967] [139811747788352] Internal Server Error: /favicon.ico
Traceback (most recent call last):
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/movies/middleware.py", line 12, in __call__
    start_time = time.time()
AttributeError: type object 'datetime.time' has no attribute 'time'
[ERROR] [2022-11-22 18:23:14,786] [log.241] [11382] [139704919914048] Internal Server Error: /detail/1
Traceback (most recent call last):
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/utils/deprecation.py", line 138, in __call__
    response = self.process_response(request, response)
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/middleware/clickjacking.py", line 27, in process_response
    if response.get("X-Frame-Options") is not None:
AttributeError: 'int' object has no attribute 'get'
[ERROR] [2022-11-23 09:21:10,750] [log.241] [6727] [139755614369344] Internal Server Error: /rate_moive/1
Traceback (most recent call last):
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/models/fields/__init__.py", line 2018, in get_prep_value
    return int(value)
TypeError: int() argument must be a string, a bytes-like object or a real number, not 'SimpleLazyObject'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/movies/views.py", line 79, in rate_movie
    rating = MovieRate.objects.create(
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/models/manager.py", line 85, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/models/query.py", line 671, in create
    obj.save(force_insert=True, using=self.db)
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/models/base.py", line 812, in save
    self.save_base(
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/models/base.py", line 863, in save_base
    updated = self._save_table(
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/models/base.py", line 1006, in _save_table
    results = self._do_insert(
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/models/base.py", line 1047, in _do_insert
    return manager._insert(
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/models/manager.py", line 85, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/models/query.py", line 1790, in _insert
    return query.get_compiler(using=using).execute_sql(returning_fields)
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/models/sql/compiler.py", line 1659, in execute_sql
    for sql, params in self.as_sql():
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/models/sql/compiler.py", line 1583, in as_sql
    value_rows = [
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/models/sql/compiler.py", line 1584, in <listcomp>
    [
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/models/sql/compiler.py", line 1585, in <listcomp>
    self.prepare_value(field, self.pre_save_val(field, obj))
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/models/sql/compiler.py", line 1523, in prepare_value
    value = field.get_db_prep_save(value, connection=self.connection)
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/models/fields/related.py", line 1146, in get_db_prep_save
    return self.target_field.get_db_prep_save(value, connection=connection)
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/models/fields/__init__.py", line 925, in get_db_prep_save
    return self.get_db_prep_value(value, connection=connection, prepared=False)
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/models/fields/__init__.py", line 2703, in get_db_prep_value
    value = self.get_prep_value(value)
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/models/fields/__init__.py", line 2020, in get_prep_value
    raise e.__class__(
TypeError: Field 'id' expected a number but got <SimpleLazyObject: <django.contrib.auth.models.AnonymousUser object at 0x7f1b681a03d0>>.
[ERROR] [2022-11-23 09:23:46,258] [log.241] [6918] [140354680518208] Internal Server Error: /rate_moive/1
Traceback (most recent call last):
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/models/fields/__init__.py", line 2018, in get_prep_value
    return int(value)
TypeError: int() argument must be a string, a bytes-like object or a real number, not 'SimpleLazyObject'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/movies/views.py", line 79, in rate_movie
    rating = MovieRate.objects.create(
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/models/manager.py", line 85, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/models/query.py", line 671, in create
    obj.save(force_insert=True, using=self.db)
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/models/base.py", line 812, in save
    self.save_base(
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/models/base.py", line 863, in save_base
    updated = self._save_table(
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/models/base.py", line 1006, in _save_table
    results = self._do_insert(
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/models/base.py", line 1047, in _do_insert
    return manager._insert(
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/models/manager.py", line 85, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/models/query.py", line 1790, in _insert
    return query.get_compiler(using=using).execute_sql(returning_fields)
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/models/sql/compiler.py", line 1659, in execute_sql
    for sql, params in self.as_sql():
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/models/sql/compiler.py", line 1583, in as_sql
    value_rows = [
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/models/sql/compiler.py", line 1584, in <listcomp>
    [
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/models/sql/compiler.py", line 1585, in <listcomp>
    self.prepare_value(field, self.pre_save_val(field, obj))
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/models/sql/compiler.py", line 1523, in prepare_value
    value = field.get_db_prep_save(value, connection=self.connection)
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/models/fields/related.py", line 1146, in get_db_prep_save
    return self.target_field.get_db_prep_save(value, connection=connection)
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/models/fields/__init__.py", line 925, in get_db_prep_save
    return self.get_db_prep_value(value, connection=connection, prepared=False)
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/models/fields/__init__.py", line 2703, in get_db_prep_value
    value = self.get_prep_value(value)
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/models/fields/__init__.py", line 2020, in get_prep_value
    raise e.__class__(
TypeError: Field 'id' expected a number but got <SimpleLazyObject: <django.contrib.auth.models.AnonymousUser object at 0x7fa6df0915d0>>.
[ERROR] [2022-11-23 09:27:31,905] [log.241] [6918] [140354680518208] Internal Server Error: /rate_moive/1
Traceback (most recent call last):
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/models/fields/__init__.py", line 2018, in get_prep_value
    return int(value)
TypeError: int() argument must be a string, a bytes-like object or a real number, not 'SimpleLazyObject'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/movies/views.py", line 79, in rate_movie
    rating = MovieRate.objects.create(
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/models/manager.py", line 85, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/models/query.py", line 671, in create
    obj.save(force_insert=True, using=self.db)
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/models/base.py", line 812, in save
    self.save_base(
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/models/base.py", line 863, in save_base
    updated = self._save_table(
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/models/base.py", line 1006, in _save_table
    results = self._do_insert(
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/models/base.py", line 1047, in _do_insert
    return manager._insert(
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/models/manager.py", line 85, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/models/query.py", line 1790, in _insert
    return query.get_compiler(using=using).execute_sql(returning_fields)
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/models/sql/compiler.py", line 1659, in execute_sql
    for sql, params in self.as_sql():
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/models/sql/compiler.py", line 1583, in as_sql
    value_rows = [
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/models/sql/compiler.py", line 1584, in <listcomp>
    [
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/models/sql/compiler.py", line 1585, in <listcomp>
    self.prepare_value(field, self.pre_save_val(field, obj))
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/models/sql/compiler.py", line 1523, in prepare_value
    value = field.get_db_prep_save(value, connection=self.connection)
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/models/fields/related.py", line 1146, in get_db_prep_save
    return self.target_field.get_db_prep_save(value, connection=connection)
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/models/fields/__init__.py", line 925, in get_db_prep_save
    return self.get_db_prep_value(value, connection=connection, prepared=False)
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/models/fields/__init__.py", line 2703, in get_db_prep_value
    value = self.get_prep_value(value)
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/models/fields/__init__.py", line 2020, in get_prep_value
    raise e.__class__(
TypeError: Field 'id' expected a number but got <SimpleLazyObject: <django.contrib.auth.models.AnonymousUser object at 0x7fa6df05b370>>.
[ERROR] [2022-11-23 09:27:51,906] [log.241] [6918] [140354680518208] Internal Server Error: /rate_moive/1
Traceback (most recent call last):
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/models/fields/__init__.py", line 2018, in get_prep_value
    return int(value)
TypeError: int() argument must be a string, a bytes-like object or a real number, not 'SimpleLazyObject'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/movies/views.py", line 79, in rate_movie
    rating = MovieRate.objects.create(
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/models/manager.py", line 85, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/models/query.py", line 671, in create
    obj.save(force_insert=True, using=self.db)
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/models/base.py", line 812, in save
    self.save_base(
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/models/base.py", line 863, in save_base
    updated = self._save_table(
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/models/base.py", line 1006, in _save_table
    results = self._do_insert(
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/models/base.py", line 1047, in _do_insert
    return manager._insert(
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/models/manager.py", line 85, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/models/query.py", line 1790, in _insert
    return query.get_compiler(using=using).execute_sql(returning_fields)
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/models/sql/compiler.py", line 1659, in execute_sql
    for sql, params in self.as_sql():
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/models/sql/compiler.py", line 1583, in as_sql
    value_rows = [
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/models/sql/compiler.py", line 1584, in <listcomp>
    [
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/models/sql/compiler.py", line 1585, in <listcomp>
    self.prepare_value(field, self.pre_save_val(field, obj))
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/models/sql/compiler.py", line 1523, in prepare_value
    value = field.get_db_prep_save(value, connection=self.connection)
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/models/fields/related.py", line 1146, in get_db_prep_save
    return self.target_field.get_db_prep_save(value, connection=connection)
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/models/fields/__init__.py", line 925, in get_db_prep_save
    return self.get_db_prep_value(value, connection=connection, prepared=False)
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/models/fields/__init__.py", line 2703, in get_db_prep_value
    value = self.get_prep_value(value)
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/models/fields/__init__.py", line 2020, in get_prep_value
    raise e.__class__(
TypeError: Field 'id' expected a number but got <SimpleLazyObject: <django.contrib.auth.models.AnonymousUser object at 0x7fa6df05b4f0>>.
[ERROR] [2022-11-23 09:28:58,970] [log.241] [7046] [139933936252480] Internal Server Error: /rate_moive/1
Traceback (most recent call last):
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/models/fields/__init__.py", line 2018, in get_prep_value
    return int(value)
TypeError: int() argument must be a string, a bytes-like object or a real number, not 'SimpleLazyObject'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/movies/views.py", line 78, in rate_movie
    rating = MovieRate.objects.create(
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/models/manager.py", line 85, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/models/query.py", line 671, in create
    obj.save(force_insert=True, using=self.db)
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/models/base.py", line 812, in save
    self.save_base(
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/models/base.py", line 863, in save_base
    updated = self._save_table(
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/models/base.py", line 1006, in _save_table
    results = self._do_insert(
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/models/base.py", line 1047, in _do_insert
    return manager._insert(
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/models/manager.py", line 85, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/models/query.py", line 1790, in _insert
    return query.get_compiler(using=using).execute_sql(returning_fields)
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/models/sql/compiler.py", line 1659, in execute_sql
    for sql, params in self.as_sql():
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/models/sql/compiler.py", line 1583, in as_sql
    value_rows = [
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/models/sql/compiler.py", line 1584, in <listcomp>
    [
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/models/sql/compiler.py", line 1585, in <listcomp>
    self.prepare_value(field, self.pre_save_val(field, obj))
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/models/sql/compiler.py", line 1523, in prepare_value
    value = field.get_db_prep_save(value, connection=self.connection)
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/models/fields/related.py", line 1146, in get_db_prep_save
    return self.target_field.get_db_prep_save(value, connection=connection)
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/models/fields/__init__.py", line 925, in get_db_prep_save
    return self.get_db_prep_value(value, connection=connection, prepared=False)
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/models/fields/__init__.py", line 2703, in get_db_prep_value
    value = self.get_prep_value(value)
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/models/fields/__init__.py", line 2020, in get_prep_value
    raise e.__class__(
TypeError: Field 'id' expected a number but got <SimpleLazyObject: <django.contrib.auth.models.AnonymousUser object at 0x7f44e8998bb0>>.
[ERROR] [2022-11-23 09:30:35,195] [log.241] [7046] [139933831382592] Internal Server Error: /rate_moive/1
Traceback (most recent call last):
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/models/fields/__init__.py", line 2018, in get_prep_value
    return int(value)
TypeError: int() argument must be a string, a bytes-like object or a real number, not 'SimpleLazyObject'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/movies/views.py", line 78, in rate_movie
    rating = MovieRate.objects.create(
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/models/manager.py", line 85, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/models/query.py", line 671, in create
    obj.save(force_insert=True, using=self.db)
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/models/base.py", line 812, in save
    self.save_base(
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/models/base.py", line 863, in save_base
    updated = self._save_table(
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/models/base.py", line 1006, in _save_table
    results = self._do_insert(
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/models/base.py", line 1047, in _do_insert
    return manager._insert(
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/models/manager.py", line 85, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/models/query.py", line 1790, in _insert
    return query.get_compiler(using=using).execute_sql(returning_fields)
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/models/sql/compiler.py", line 1659, in execute_sql
    for sql, params in self.as_sql():
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/models/sql/compiler.py", line 1583, in as_sql
    value_rows = [
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/models/sql/compiler.py", line 1584, in <listcomp>
    [
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/models/sql/compiler.py", line 1585, in <listcomp>
    self.prepare_value(field, self.pre_save_val(field, obj))
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/models/sql/compiler.py", line 1523, in prepare_value
    value = field.get_db_prep_save(value, connection=self.connection)
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/models/fields/related.py", line 1146, in get_db_prep_save
    return self.target_field.get_db_prep_save(value, connection=connection)
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/models/fields/__init__.py", line 925, in get_db_prep_save
    return self.get_db_prep_value(value, connection=connection, prepared=False)
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/models/fields/__init__.py", line 2703, in get_db_prep_value
    value = self.get_prep_value(value)
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/models/fields/__init__.py", line 2020, in get_prep_value
    raise e.__class__(
TypeError: Field 'id' expected a number but got <SimpleLazyObject: <User: nazanin@gmail.com>>.
[ERROR] [2022-11-23 09:40:35,749] [log.241] [8171] [140598993483328] Internal Server Error: /rate_moive/1
Traceback (most recent call last):
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/backends/utils.py", line 89, in _execute
    return self.cursor.execute(sql, params)
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/backends/sqlite3/base.py", line 357, in execute
    return Database.Cursor.execute(self, query, params)
sqlite3.IntegrityError: UNIQUE constraint failed: movies_movierate.user_id, movies_movierate.movie_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/movies/views.py", line 79, in rate_movie
    rating = MovieRate.objects.create(
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/models/manager.py", line 85, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/models/query.py", line 671, in create
    obj.save(force_insert=True, using=self.db)
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/models/base.py", line 812, in save
    self.save_base(
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/models/base.py", line 863, in save_base
    updated = self._save_table(
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/models/base.py", line 1006, in _save_table
    results = self._do_insert(
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/models/base.py", line 1047, in _do_insert
    return manager._insert(
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/models/manager.py", line 85, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/models/query.py", line 1790, in _insert
    return query.get_compiler(using=using).execute_sql(returning_fields)
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/models/sql/compiler.py", line 1660, in execute_sql
    cursor.execute(sql, params)
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/backends/utils.py", line 103, in execute
    return super().execute(sql, params)
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/backends/utils.py", line 67, in execute
    return self._execute_with_wrappers(
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/backends/utils.py", line 80, in _execute_with_wrappers
    return executor(sql, params, many, context)
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/backends/utils.py", line 84, in _execute
    with self.db.wrap_database_errors:
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/utils.py", line 91, in __exit__
    raise dj_exc_value.with_traceback(traceback) from exc_value
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/backends/utils.py", line 89, in _execute
    return self.cursor.execute(sql, params)
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/backends/sqlite3/base.py", line 357, in execute
    return Database.Cursor.execute(self, query, params)
django.db.utils.IntegrityError: UNIQUE constraint failed: movies_movierate.user_id, movies_movierate.movie_id
[ERROR] [2022-11-23 09:47:28,644] [log.241] [8171] [140598993483328] Internal Server Error: /rate_moive/1
Traceback (most recent call last):
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/backends/utils.py", line 89, in _execute
    return self.cursor.execute(sql, params)
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/backends/sqlite3/base.py", line 357, in execute
    return Database.Cursor.execute(self, query, params)
sqlite3.IntegrityError: UNIQUE constraint failed: movies_movierate.user_id, movies_movierate.movie_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/movies/views.py", line 79, in rate_movie
    rating = MovieRate.objects.create(
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/models/manager.py", line 85, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/models/query.py", line 671, in create
    obj.save(force_insert=True, using=self.db)
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/models/base.py", line 812, in save
    self.save_base(
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/models/base.py", line 863, in save_base
    updated = self._save_table(
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/models/base.py", line 1006, in _save_table
    results = self._do_insert(
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/models/base.py", line 1047, in _do_insert
    return manager._insert(
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/models/manager.py", line 85, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/models/query.py", line 1790, in _insert
    return query.get_compiler(using=using).execute_sql(returning_fields)
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/models/sql/compiler.py", line 1660, in execute_sql
    cursor.execute(sql, params)
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/backends/utils.py", line 103, in execute
    return super().execute(sql, params)
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/backends/utils.py", line 67, in execute
    return self._execute_with_wrappers(
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/backends/utils.py", line 80, in _execute_with_wrappers
    return executor(sql, params, many, context)
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/backends/utils.py", line 84, in _execute
    with self.db.wrap_database_errors:
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/utils.py", line 91, in __exit__
    raise dj_exc_value.with_traceback(traceback) from exc_value
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/backends/utils.py", line 89, in _execute
    return self.cursor.execute(sql, params)
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/backends/sqlite3/base.py", line 357, in execute
    return Database.Cursor.execute(self, query, params)
django.db.utils.IntegrityError: UNIQUE constraint failed: movies_movierate.user_id, movies_movierate.movie_id
[ERROR] [2022-11-23 09:48:21,000] [log.241] [8171] [140598993483328] Internal Server Error: /rate_moive/1
Traceback (most recent call last):
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/backends/utils.py", line 89, in _execute
    return self.cursor.execute(sql, params)
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/backends/sqlite3/base.py", line 357, in execute
    return Database.Cursor.execute(self, query, params)
sqlite3.IntegrityError: UNIQUE constraint failed: movies_movierate.user_id, movies_movierate.movie_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/movies/views.py", line 79, in rate_movie
    rating = MovieRate.objects.create(
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/models/manager.py", line 85, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/models/query.py", line 671, in create
    obj.save(force_insert=True, using=self.db)
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/models/base.py", line 812, in save
    self.save_base(
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/models/base.py", line 863, in save_base
    updated = self._save_table(
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/models/base.py", line 1006, in _save_table
    results = self._do_insert(
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/models/base.py", line 1047, in _do_insert
    return manager._insert(
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/models/manager.py", line 85, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/models/query.py", line 1790, in _insert
    return query.get_compiler(using=using).execute_sql(returning_fields)
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/models/sql/compiler.py", line 1660, in execute_sql
    cursor.execute(sql, params)
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/backends/utils.py", line 103, in execute
    return super().execute(sql, params)
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/backends/utils.py", line 67, in execute
    return self._execute_with_wrappers(
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/backends/utils.py", line 80, in _execute_with_wrappers
    return executor(sql, params, many, context)
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/backends/utils.py", line 84, in _execute
    with self.db.wrap_database_errors:
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/utils.py", line 91, in __exit__
    raise dj_exc_value.with_traceback(traceback) from exc_value
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/backends/utils.py", line 89, in _execute
    return self.cursor.execute(sql, params)
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/backends/sqlite3/base.py", line 357, in execute
    return Database.Cursor.execute(self, query, params)
django.db.utils.IntegrityError: UNIQUE constraint failed: movies_movierate.user_id, movies_movierate.movie_id
[ERROR] [2022-11-23 09:49:12,610] [log.241] [8171] [140598993483328] Internal Server Error: /rate_moive/1
Traceback (most recent call last):
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/backends/utils.py", line 89, in _execute
    return self.cursor.execute(sql, params)
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/backends/sqlite3/base.py", line 357, in execute
    return Database.Cursor.execute(self, query, params)
sqlite3.IntegrityError: UNIQUE constraint failed: movies_movierate.user_id, movies_movierate.movie_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/movies/views.py", line 79, in rate_movie
    rating = MovieRate.objects.create(
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/models/manager.py", line 85, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/models/query.py", line 671, in create
    obj.save(force_insert=True, using=self.db)
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/models/base.py", line 812, in save
    self.save_base(
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/models/base.py", line 863, in save_base
    updated = self._save_table(
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/models/base.py", line 1006, in _save_table
    results = self._do_insert(
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/models/base.py", line 1047, in _do_insert
    return manager._insert(
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/models/manager.py", line 85, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/models/query.py", line 1790, in _insert
    return query.get_compiler(using=using).execute_sql(returning_fields)
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/models/sql/compiler.py", line 1660, in execute_sql
    cursor.execute(sql, params)
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/backends/utils.py", line 103, in execute
    return super().execute(sql, params)
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/backends/utils.py", line 67, in execute
    return self._execute_with_wrappers(
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/backends/utils.py", line 80, in _execute_with_wrappers
    return executor(sql, params, many, context)
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/backends/utils.py", line 84, in _execute
    with self.db.wrap_database_errors:
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/utils.py", line 91, in __exit__
    raise dj_exc_value.with_traceback(traceback) from exc_value
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/backends/utils.py", line 89, in _execute
    return self.cursor.execute(sql, params)
  File "/home/armanpc/PycharmProjects/django-projects/IMDB/venv/lib/python3.10/site-packages/django/db/backends/sqlite3/base.py", line 357, in execute
    return Database.Cursor.execute(self, query, params)
django.db.utils.IntegrityError: UNIQUE constraint failed: movies_movierate.user_id, movies_movierate.movie_id
